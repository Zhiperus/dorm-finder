name: Main Branch Protection

on:
  pull_request:
 
jobs:
  check-branch:
    runs-on: ubuntu-latest
    steps:
      - name: Check source branch
        run: |
          TARGET_BRANCH="${GITHUB_BASE_REF}"
          SOURCE_BRANCH="${GITHUB_HEAD_REF}"

          echo "ðŸ” Checking PR: ${SOURCE_BRANCH} -> ${TARGET_BRANCH}"

          if [[ "$TARGET_BRANCH" == "main" ]]; then
            if [[ "$SOURCE_BRANCH" != "develop" ]]; then
              echo "âŒ Error: Pull requests to 'main' must come from 'develop'."
              echo "   Current source: '$SOURCE_BRANCH'"
              exit 1
            fi
            echo "âœ… Valid path: develop -> main"
          else
            echo "âœ… Check skipped (Target is not 'main')."
          fi
